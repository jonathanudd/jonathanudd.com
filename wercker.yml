box: debian
build:
  steps:
    - script:
        name: install git
        code: |
            apt-get update
            apt-get install git -y
    - add-ssh-key:
        keyname: jonathanuddcom
        host: github.com
    - add-to-known_hosts:
        hostname: github.com
        fingerprint: 13:47:Cc:FA:KE:28:NO:T6:RE:A7:56:4d:eb:df:a6:48
    - script:
        name: initialize git submodules
        code: |
            git submodule update --init --recursive
    - arjen/hugo-build:
        version: "0.14"
        theme: hugo-vidhance-theme
deploy:
  steps:
    - install-packages:
        packages: git
    - lukevivier/gh-pages@0.2.1:
        token: $GIT_TOKEN
        domain: jonathanudd.com
        basedir: public
